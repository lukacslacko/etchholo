<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Sound</title>
    <style>
    </style>
</head>
<body>
    <!-- audio element with sound data generated by an inlined javascript, after clicking on a button which says "Generate" -->
    <audio id="audio" controls></audio>
        <button id="generate">Generate</button>
<script>
    // On clicking generate, create audio.
    document.getElementById("generate").onclick = function() {
            var audio = document.getElementById("audio");
            var context = new AudioContext();
            var lengthInSeconds = 3;
            // Create a buffer with 1 channel and 44100 samples per second.
            var buffer = context.createBuffer(1, 44100 * lengthInSeconds, 44100);
            let bufferLength = buffer.length;
            var data = buffer.getChannelData(0);

            // Fill the buffer with an oscillating sound.
            for (var i = 0; i < bufferLength; i++) {
                data[i] = Math.sin(i / 10);
            }
            // Modulate the buffer by a slowly changing wave.
            for (var i = 0; i < bufferLength; i++) {
                data[i] *= Math.sin(i / 1000);
            }
            // Add peaks and valleys in the volume.
            for (var i = 0; i < bufferLength; i++) {
                data[i] *= Math.sin(i / 100);
            }
            // Add another sine wave of a different frequency.
            for (var i = 0; i < bufferLength; i++) {
                data[i] += Math.sin(i / 20);
            }
            // Add a noise wave.
            for (var i = 0; i < bufferLength; i++) {
                data[i] += Math.random() * 0.2 - 0.1;
            }
            // Apply a low-pass filter.
            var filter = context.createBiquadFilter();
            filter.type = "lowpass";
            filter.frequency.value = 1000;
            // Add resonance to the filter.
            filter.Q.value = 10;
            filter.connect(context.destination);
            // Create a sound source.  
            var source = context.createBufferSource();
            source.buffer = buffer;
            // Connect the sound source to the output of the filter.
            source.connect(filter);
            // Play the sound.
            source.start();
        }
        </script>
</body>

</html>